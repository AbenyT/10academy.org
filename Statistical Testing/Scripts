import pandas as pd
import numpy as np
from scipy import stats
import matplotlib.pyplot as plt
import seaborn as sns

# Load the data
df = pd.read_csv('insurance_data.csv')

# Display the first few rows and data info
print(df.head())
print("\
Dataframe Info:")
print(df.info())

# Display summary statistics
print("\
Summary Statistics:")
print(df.describe())

# Display unique values in each column
for column in df.columns:
    print(f"\
Unique values in {column}:")
    print(df[column].value_counts())

print("Data loaded and inspected.")# Chi-squared test for Province vs Claimed
province_claimed = pd.crosstab(df['Province'], df['Claimed'])
chi2_province, p_province = stats.chi2_contingency(province_claimed)[:2]

# Chi-squared test for Gender vs Claimed
gender_claimed = pd.crosstab(df['Gender'], df['Claimed'])
chi2_gender, p_gender = stats.chi2_contingency(gender_claimed)[:2]

print("Chi-squared test results:")
print(f"Province vs Claimed: chi2 = {chi2_province:.4f}, p-value = {p_province:.4f}")
print(f"Gender vs Claimed: chi2 = {chi2_gender:.4f}, p-value = {p_gender:.4f}")

# Visualize the relationships
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 6))

sns.countplot(data=df, x='Province', hue='Claimed', ax=ax1)
ax1.set_title('Claims by Province')
ax1.set_ylabel('Count')

sns.countplot(data=df, x='Gender', hue='Claimed', ax=ax2)
ax2.set_title('Claims by Gender')
ax2.set_ylabel('Count')

plt.tight_layout()
plt.show()

print("Visualization complete.")
